---
phase: 03-film-clicker-layout
plan: 03
type: execute
wave: 2
depends_on: [03-01]
files_modified:
  - src/hooks/useKeyboardShortcuts.ts
  - src/lib/constants.ts
  - src/components/HelpPanel.tsx
autonomous: true

must_haves:
  truths:
    - "User can press Space to play/pause video"
    - "User can press K to pause video (standard film editor shortcut)"
    - "User can press J to hold-scrub backward"
    - "User can press L to hold-scrub forward"
    - "User can press S to toggle slow-mo mode"
    - "User can press Arrow Left/Right to jump -1s/+1s"
    - "User can press Shift+Arrow Left/Right to jump -5s/+5s"
    - "User can press Cmd/Ctrl+Arrow Left/Right to jump -10s/+10s"
    - "Help panel displays updated keyboard shortcuts"
  artifacts:
    - path: "src/hooks/useKeyboardShortcuts.ts"
      provides: "Updated keyboard shortcuts for film clicker controls"
      contains: "toggleSlowMo"
    - path: "src/lib/constants.ts"
      provides: "KEYBOARD_MAP with new shortcuts"
      contains: "toggleSlowMo.*s"
    - path: "src/components/HelpPanel.tsx"
      provides: "Updated help text showing new shortcuts"
      contains: "S.*slow"
  key_links:
    - from: "useKeyboardShortcuts hook"
      to: "toggleSlowMo callback"
      via: "onToggleSlowMo prop"
      pattern: "onToggleSlowMo\\(\\)"
    - from: "Keyboard event handler"
      to: "Jump controls via scrubber.jumpBack/jumpForward"
      via: "Arrow key + modifier detection"
      pattern: "e\\.shiftKey.*e\\.metaKey"
---

<objective>
Update keyboard shortcuts to match film clicker controls with new slow-mo toggle and jump shortcuts. Add S key for slow-mo toggle, update arrow keys to trigger jumps with modifiers (Shift for 5s, Cmd/Ctrl for 10s). Update help panel to document new shortcuts.

Purpose: Film editing workflows rely on keyboard shortcuts for speed. Updated shortcuts must match industry patterns (JKL for playback control) and add intuitive mappings for new features (S for slow-mo, modified arrows for jumps).

Output: Updated useKeyboardShortcuts hook, KEYBOARD_MAP constants, and HelpPanel documentation.
</objective>

<execution_context>
@C:\Users\Daniel\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Daniel\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@h:\film\.planning\PROJECT.md
@h:\film\.planning\ROADMAP.md
@h:\film\.planning\STATE.md
@h:\film\src\hooks\useKeyboardShortcuts.ts
@h:\film\src\lib\constants.ts
@h:\film\src\components\HelpPanel.tsx
</context>

<tasks>

<task type="auto">
  <name>Update keyboard shortcuts for film clicker controls</name>
  <files>src/hooks/useKeyboardShortcuts.ts, src/lib/constants.ts, src/components/HelpPanel.tsx</files>
  <action>
**Update KEYBOARD_MAP in constants.ts:**
```typescript
export const KEYBOARD_MAP = {
  playPause: " ",
  pause: "k",
  rewind: "j",
  forward: "l",
  toggleSlowMo: "s",
  jumpBack1: "ArrowLeft",
  jumpForward1: "ArrowRight",
  // 5s and 10s jumps use modifiers (Shift and Cmd/Ctrl) with arrow keys
} as const;
```

**Update useKeyboardShortcuts.ts:**
1. Update hook signature to accept `onToggleSlowMo` callback:
   ```typescript
   export function useKeyboardShortcuts(
     enabled: boolean,
     controller: YouTubePlayerController | null,
     scrubber: ScrubberForKeyboard | null,
     onToggleSlowMo?: () => void
   )
   ```

2. Add slow-mo toggle handler:
   ```typescript
   if (key === KEYBOARD_MAP.toggleSlowMo) {
     e.preventDefault();
     onToggleSlowMo?.();
     return;
   }
   ```

3. Add jump handlers with modifier detection:
   ```typescript
   // Arrow Left: -1s (no modifier), -5s (Shift), -10s (Cmd/Ctrl)
   if (key === KEYBOARD_MAP.jumpBack1) {
     e.preventDefault();
     if (e.metaKey || e.ctrlKey) {
       scrubber?.jumpBack(10);
     } else if (e.shiftKey) {
       scrubber?.jumpBack(5);
     } else {
       scrubber?.jumpBack(1);
     }
     return;
   }

   // Arrow Right: +1s (no modifier), +5s (Shift), +10s (Cmd/Ctrl)
   if (key === KEYBOARD_MAP.jumpForward1) {
     e.preventDefault();
     if (e.metaKey || e.ctrlKey) {
       scrubber?.jumpForward(10);
     } else if (e.shiftKey) {
       scrubber?.jumpForward(5);
     } else {
       scrubber?.jumpForward(1);
     }
     return;
   }
   ```

**Update ScrubberShell.tsx:**
Pass `toggleSlowMo` to useKeyboardShortcuts:
```typescript
useKeyboardShortcuts(!!videoId, controller, scrubber, toggleSlowMo);
```

**Update HelpPanel.tsx:**
Update keyboard shortcuts table to show:
- Space: Play/Pause
- K: Pause
- J: Hold Rewind
- L: Hold Forward
- S: Toggle Slow-Mo
- ←: Jump -1s (Shift: -5s, ⌘/Ctrl: -10s)
- →: Jump +1s (Shift: +5s, ⌘/Ctrl: +10s)
  </action>
  <verify>
1. Load app with video, focus on page (not in input)
2. Press Space → video plays/pauses
3. Press K → video pauses
4. Press and hold J → scrubs backward
5. Press and hold L → scrubs forward
6. Press S → toggles between normal and slow-mo speed
7. Press ← → jumps back 1s
8. Press Shift+← → jumps back 5s
9. Press Cmd+← (or Ctrl+← on Windows) → jumps back 10s
10. Press → → jumps forward 1s
11. Press Shift+→ → jumps forward 5s
12. Press Cmd+→ (or Ctrl+→ on Windows) → jumps forward 10s
13. Open help panel → verify all shortcuts documented correctly
  </verify>
  <done>
All keyboard shortcuts work as specified. Slow-mo toggle responds to S key. Arrow keys jump with modifier support (Shift for 5s, Cmd/Ctrl for 10s). Help panel documents all new shortcuts. JKL and arrow shortcuts do not fire when typing in inputs.
  </done>
</task>

</tasks>

<verification>
## Keyboard Shortcuts Check
1. All playback shortcuts work (Space, K, J, L, S)
2. All jump shortcuts work with correct modifier behavior (←/→, Shift+←/→, Cmd/Ctrl+←/→)
3. Shortcuts do not fire when focused in text input (existing isTypingTarget check still works)
4. Help panel shows accurate shortcut documentation
</verification>

<success_criteria>
- KEY-01 implemented: Keyboard shortcuts updated to match new control scheme
- All main controls accessible via keyboard (play/pause, jumps, slow-mo toggle)
- Shortcuts follow film editing conventions (JKL for playback)
- Help documentation updated and accurate
</success_criteria>

<output>
After completion, create `.planning/phases/03-film-clicker-layout/03-03-SUMMARY.md`
</output>
